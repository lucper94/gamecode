<!DOCTYPE html>
<html lang="en" ng-app="games">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

<link href="//netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="/gamecode/libs/angular.min.js"></script>
<script src="/gamecode/libs/angular-ui-router.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular-animate.min.js" ></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-sanitize.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular-touch.min.js" ></script>
<script src="/gamecode/libs/ui-bootstrap-tpls-2.5.0.min.js" ></script>
<script src="panel/js/gc.app.js" ></script>
  <script>
    (function(){
    
         'use strict'

         function search($http,limitToFilter){
             var ctrl = this;
             ctrl.hola = function (){ 
                 alert(ctrl.asyncSelected);
                console.log(ctrl.names);
                console.log(ctrl.names.indexOf(ctrl.asyncSelected));
                var selectedGame = ctrl.names.indexOf(ctrl.asyncSelected);
                console.log(ctrl.ids[selectedGame]);
                location.href='search.html#!/detail/' + ctrl.ids[selectedGame];
								};
							
             console.log('hi');
             ctrl.getLocation = function(val) {
    return $http.get('http://localhost/metalgear/api/webpage/search/' + val)
        .then(function(response){
        console.log(response);
            ctrl.ids = response.data.ID;
            ctrl.names = response.data.Names;
            return limitToFilter(response.data.Names, 7);
        // return   ctrl.states = ['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico', 'New York', 'North Dakota', 'North Carolina', 'Ohio', 'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'];
    //   return response.data.results.map(function(item){
        // return item.formatted_address;
  // Any function returning a promise obje
    //   });
    });
  };
         }
    
         angular
            .module('games')
            .controller('search', search);
    
     }());
</script>
 
    <title>Document</title>
</head>
<body>
    

    <div class='container-fluid typeahead-demo' ng-controller="search as vm">

   

    <h4>Asynchronous results</h4>
    <pre>Model: {{vm.asyncSelected | json}}</pre>
    <input type="text" ng-model="vm.asyncSelected" placeholder="Locations loaded via $http" uib-typeahead="address for address in vm.getLocation($viewValue) | limitTo:8" typeahead-loading="loadingLocations" typeahead-on-select="vm.hola()" typeahead-no-results="noResults" class="form-control">
    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
    <div ng-show="noResults">
      <i class="glyphicon glyphicon-remove"></i> No Results Found
    </div>

   
   
</div>

</body>
</html>